{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="m-0">Análise de Cursos</h3>
  {% if is_admin %}
    <a class="btn btn-outline-info btn-sm" href="{{ url_for('dashboard') }}">Painel Admin</a>
  {% endif %}
</div>

<div class="card p-4 shadow-sm">
  <h5 class="mb-3">Realizar Previsão</h5>

  <form method="POST">
    <div class="row g-3">
      {% for f, meta in sugestoes.items() %}
        <div class="col-md-6">
          <label class="form-label small">{{ f }}</label>
          {% if meta.tipo == "num" %}
            <input type="number" name="{{ f }}" step="any" class="form-control"
                   placeholder="Entre {{ meta.min }} e {{ meta.max }}">
            <div class="form-text text-secondary">média: {{ meta.media }}</div>
          {% else %}
            <select name="{{ f }}" class="form-select">
              <option value="">Selecione</option>
              {% for op in meta.opcoes %}
                <option value="{{ op }}">{{ op }}</option>
              {% endfor %}
            </select>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    <div class="mt-4 text-end">
      <button type="submit" class="btn btn-primary px-4">Analisar</button>
    </div>
  </form>
</div>

{% if resultado %}
  <div class="card p-4 mt-4 text-center">
    {% if resultado.error %}
      <div class="alert alert-danger">{{ resultado.error }}</div>
    {% else %}
      <h5 class="mb-3">Resultado da Previsão</h5>
      <p class="lead mb-0">Tipo de tarefa: <b>{{ resultado.task }}</b></p>
      <h3 class="text-info mt-2">{{ resultado.prediction }}</h3>
    {% endif %}
  </div>
{% endif %}

{% endblock %}
